%!TEX root = ../main.tex
% Introduction
The maximum flow problem can be stated as follows: in a capacitated network, we need to push as much flow as we can between two specials vertices, the source and the sink. The two constraints are that we cannot exceed the capacity of any edge and a vertex cannot hold flow. A common analogy is a water distribution in a country. The vertices can be sources of water, cities needing water or just some transfer nodes. The edges can be viewed as pipes with a maximal volume of water per second (or capacity). The flow is the amount of water flowing through the pipes. The goal is to find the maximum flow of water that can be send from a source of water to a needing city given the capacities of each pipes. As we need to find the maximum flow that can be pushed, this an optimization problem. We will see in the section Applications \ref{sec:applications} that the maximum flow problem is important because it can be used to express and resolve a wide variety of different kinds of problems.\\

To solve this problem, two families of algorithms have been developped these last decades. The first one is the family of the augmenting path algorithms. The aim of thoses algorithms is to find an augmenting path in the residual network until it becomes impossible. We will return on these principles later. The second family is the family of preflow-push algorithms. The aim of those is to flood the network to quickly find the maximum flow. \\

%todo we can make it longer if needed

\section{Notations and Definitions}

In this section, we will set the conventions that we will use along this master thesis. This problem is based on the graph theory, we will then use the definitions of this theory to frame the problem.

\subsection{Capacitated network}
%p24
\begin{definition}
\label{dgraph}
A \textbf{directed graph} $G = (V, E)$ consists of a set $V$ of vertices and a set $E$ of edges. We assume, without loss of generality, that $V = \left\{0, 1, ..., n-1\right\}$, where $n$ is the number of vertices. The edges are represented as an ordered pair of its vertices and is, $E \subseteq V \times V$.
\end{definition}

\begin{figure}
\centering
\includegraphics[scale=0.5]{images/dgraph.png}
\caption{A directed graph.}
\label{img:dgraph}
\end{figure}

Figure~\ref{img:dgraph} gives us an example of a directed graph.

\begin{definition}
\label{dnetwork}
A \textbf{directed network} is a directed graph whose edges have a numerical value associated to it. In the case of the maximum flow problem, this value represents the capacity of the edge. The \textbf{capacity} of an edge is a mapping $c: E \to \mathbb{R}^{+}$, and represents the maximum amount of flow that can pass through the edge. The capacity of the edge $(i, j)$ is denoted $c_{ij}$. The network is called a \textit{capacitated network}.
\end{definition}

The figure~\ref{img:dnetwork} gives us an example of a directed network. \\

\begin{figure}
\centering
\includegraphics[scale=0.5]{images/dnetwork.png}
\caption{A directed network.}
\label{img:dnetwork}
\end{figure}



In this master thesis, everything that will be mentionned by the terms \textit{graph}, \textit{network}, \dots will refer to a \textit{capacitated network}.

\subsection{Source and sink vertices}
As said earlier, the maximum flow problem distinguishes two specials nodes in the problem: the source and the sink.

\begin{definition}
\label{source}
A \textbf{source} is an arbitrary vertice \textit{s} which possesses at least one outgoing edge.
$$s \in V \text{ such that } \exists (s, k) \in E \text{ with } k \in V$$
\end{definition}

\begin{definition}
\label{sink}
A \textbf{sink} is an arbitrary vertice \textit{t} which possesses at least one incoming edge. 
$$t \in V \text{ such that } \exists (k, t) \in E \text{ with } k \in V$$
\end{definition}

In this master thesis, we will use the letters $s$ and $t$ to represent the source and the sink, respectively.

\subsection{Flow}
\begin{definition}
\label{flow}
A \textbf{flow} is a mapping $f: E \to \mathbb{R}^{+}$. The flow between \textit{i} and \textit{j} is denoted by $f_{ij}$ and is subject to two constraints:
\indent
\begin{description}
	\label{cap_constraint}
	\item[Capacity constraint] $f_{ij} \leq c_{ij}$, for each $(i, j) \in E$;
	\label{flow_constraint}
	\item[Flow conservation constraint] $\sum\limits_{(i, j) \in E} f_{ij} = \sum\limits_{(j, i) \in E} f_{ji}$ , for each $j \in V \setminus \{s, t\}$.
\end{description}
\end{definition}

\begin{definition}
\label{vflow}
The \textbf{value of a flow} is defined by $\left\vert{f}\right\vert = \sum\limits_{(s,j) \in E} f_{sj}$ or $\left\vert{f}\right\vert = \sum\limits_{(i,t) \in E} f_{it}$. It represents the amount of flow passing from the source to the sink.
\end{definition}

$\left\vert{f}\right\vert$ can be equivalently stated as the amount of flow leaving $s$ or entering $t$.

\subsection{Residual network} 
To resolve the maximum flow problem, it is convenient to use another representation of the capacitated network. To be able to find the maximum flow, several algorithms update the current flow in an incremental process. Then, it will be useful to have a representation of the graph which gives the amount of remaining flow which can be added to the current flow through an edge. This representation is called \textit{residual network} \cite{networkflows}.
\begin{definition}
\label{rcapacity}
Given a flow \textit{f} in a graph \textit{G}, the \textbf{residual capacity} $c_f (i,j)$ is defined as $c_f (i,j) = c_{ij} - f_{ij}$.
\end{definition}


\begin{definition}
\label{rnetwork}
Given a flow \textit{f} in graph G, the \textbf{residual network} $G_f$ is the directed network (defined on the same set of vertices) with all edges of positive residual capacity, each one labeled by its residual capacity.
\end{definition}


\section{Assumptions}

All along this master thesis, we will  consider a capacitated network $G = (V, E)$ with a non negative  capacity $c_{ij}$ associated with each edge $(i, j) \in E$.\\

All capacities are positives integers. With irrational flow values, the flow might not even converge towards the maximum flow \cite{Zwick1995165}.\\%TODO Donner un exemple dans la partie FF et en faire reference ici

The network is connected. This assumption is important to ensure that there is a path bewteen the source and the sink. If no such path exist, the flow is simply $0$.\\

The network does not contain any path from the source to the sink composed only of infinite capacity edges. The reason of this is that if a such path exist, we can send an infinite amount of flow along this path, and therefore the maximum flow value cannot be bounded. \\

The network does not allow multiples edges bewteen two same vertices. This assumption is not requiered if we consider that the capacities of those edges add up. This assumption allows us to keep the representation of the problem simple.

\section{Problem statement}

We have now defined all terms we will use and made all the assumptions needed. Thus we can now state the problem formally. The maximum flow problem is to maximize $\left\vert{f}\right\vert$, that is, to route as much flow as possible from s to t. The flow f must satisfy the capacity constraint and the flow conservation constraint at all vertices (except s and t). We can state the problem formally as follows.

\begin{equation}
\begin{aligned}
& {\text{Maximize}} & \sum\limits_{(s,i) \in E} f_{si} & & &\\
& \text{subject to} & & & &\\
& & & \sum\limits_{(i,j)\in E} f_{ij} = \sum\limits_{(j,i)\in E} f_{ji} & & \text{for all } i \in V \setminus \{s, t\}\\
& \text{and} & & & & \\
& & & 0 \leq f_{ij} \leq c_{ij} & & \text{for each } (i, j) \in E\\
& & & f_{ij} \text{ is an integer.}& &
\end{aligned}
\end{equation}

\section{Applications}
\label{sec:applications}
As we said earlier, the maximum flow problem arise in a wide variety of situations and in several forms. The maximum flow problem is often a subproblem of other more difficult network problems. In this section, we will describe one application of the maximum flow problem \cite{networkflows}.

\subsection{Problem of representatives}

\subsubsection{Problem Statement}

A city has $c$ citizens $C_1, C_2, C_3, ..., C_c$; $a$ associations $A_1, A_2, A_3, ..., A_a$ and $p$ political parties $P_1, P_2, P_3, ..., P_p$. Each resident is member of at least one association and belongs to one political party. Each association  must elect one of its members to represent it on the governement so that the number of council member of the political party $P_k$ is at most $u_k$. The task is to know if an arrangement is possible in regards to that property.

\begin{figure}[h]
\centering
\includegraphics[scale=0.5]{images/represent.png}
\caption{A directed network representing the problem of representatives.}
\label{img:represent}
\end{figure}

\subsubsection{Solution}

We can transform this problem to a directed network as shown in the figure \ref{img:represent}. In the network, we added a source node and a sink node. There is an arc from the source node to each association node with an unitary capacity. If a citizen is member of an association, there is an arc from the assocation node $A_i$ to the citizen node $C_j$ with an unitary capacity. If a citizen is member of a political party, there is an arc from the citizen node $C_i$ to the political party node $P_j$ with an unitary capacity. Finally, each political party nodes have an outgoing arc to the sink, with a capacity of $u_k$ (defined in the problem).

If the maximum flow of this directed network is equals to the number of associations ($a$), we can say that the city has a balanced council; otherwise, it does not. This is because if the value of the maximum flow is not $a$, it means that at least one association is not represented.

This type of model has applications in several ressource assignment settings.

%TODO Another application ...


